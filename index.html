<!doctype html>
<html lang="hi">
<head>
  <link rel="manifest" href="manifest.json">
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('service-worker.js');
  }
</script>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Digital Hub тАФ Booking (Group Notify)</title>
<style>
  :root{--blue:#075985;--accent:#6366f1;--card:#fff;--muted:#64748b}
  body{margin:0;font-family:Arial, Helvetica, sans-serif;background:#f3f7fb;color:#102027}
  .hero{background:var(--blue);color:white;padding:28px 16px;text-align:center}
  .hero h1{margin:0;font-size:34px;font-weight:700;letter-spacing:0.5px}
  .hero .meta{margin-top:10px;font-size:15px;color:rgba(255,255,255,0.95)}
  .container{max-width:980px;margin:18px auto;padding:0 12px}
  main{display:grid;grid-template-columns:1fr 320px;gap:18px;margin-top:18px}
  .card{background:var(--card);padding:18px;border-radius:10px;box-shadow:0 6px 18px rgba(6,30,50,0.06)}
  label{display:block;font-weight:700;margin-top:12px}
  input,select,textarea{width:100%;padding:10px;margin-top:6px;border:1px solid #e6eef6;border-radius:8px;font-size:14px}
  .slot-list{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .slot{padding:8px 10px;border-radius:8px;border:1px solid #e6eef6;background:#f8feff;cursor:pointer}
  .slot.selected{background:var(--accent);color:white;border-color:var(--accent)}
  .slot.full{background:#f3f4f6;color:#9aa3ad;cursor:not-allowed}
  button{background:var(--accent);color:white;border:0;padding:10px 12px;border-radius:10px;cursor:pointer;font-weight:700}
  .success{background:#ecfdf5;border-left:4px solid #10b981;padding:12px;margin-top:12px;border-radius:8px}
  footer{margin-top:22px;text-align:center;color:var(--muted);font-size:14px;padding:12px}
  .address-box{background:#f8fafb;border:1px solid #e2e8f0;padding:10px;border-radius:8px;display:inline-block;margin-top:10px;color:#0b2540}
  .small{font-size:13px;color:#475569;margin-top:8px}
  @media(max-width:900px){main{grid-template-columns:1fr;padding:0 8px}}
</style>
</head>
<body>

<header class="hero">
  <h1>Digital Hub Cyber Caf├й</h1>
  <div class="meta">тП░ рд╕рдордп: рд╕реБрдмрд╣ 6:00 рдмрдЬреЗ рд╕реЗ 9:00 рдмрдЬреЗ рддрдХ рдФрд░ рд╢рд╛рдо 5:00 рдмрдЬреЗ рд╕реЗ 10:00 рдмрдЬреЗ рддрдХ &nbsp; | &nbsp; ЁЯУЮ 7033066081 / 7250580787 &nbsp; | &nbsp; тЬЙя╕П bhelwa143@gmail.com &nbsp; | &nbsp; ЁЯТм <a href="https://wa.me/917033066081" target="_blank" style="color:inherit;text-decoration:underline">WhatsApp: 7033066081</a></div>
</header>

<div class="container">
  <main>
    <section class="card">
      <h2>рдЕрдкреЙрдЗрдВрдЯрдореЗрдВрдЯ рдлреЙрд░реНрдо</h2>
      <p class="small">рдЖрдк рддрд╛рд░реАрдЦ рдФрд░ рд╕рдордп рдЪреБрди рд╕рдХрддреЗ рд╣реИрдВ тАФ рдирд╣реАрдВ рдЪреБрдирд╛ рддреЛ рд╕рд┐рд╕реНрдЯрдо рдкрд╣рд▓рд╛ рдЙрдкрд▓рдмреНрдз рд╕реНрд▓реЙрдЯ рджреЗ рджреЗрдЧрд╛ред</p>
      <form id="form">
        <label>рдкреВрд░рд╛ рдирд╛рдо *</label>
        <input id="name" required>

        <label>рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░ *</label>
        <input id="mobile" pattern="[0-9]{10}" required placeholder="10 рдЕрдВрдХ">

        <label>рдИрдореЗрд▓ (рдпрджрд┐ рд╣реЛ)</label>
        <input id="email" type="email">

        <label>рд╕реЗрд╡рд╛ / рдлрд╝реЙрд░реНрдо рдХрд╛ рдкреНрд░рдХрд╛рд░ *</label>
        <select id="form_needed" required>
          <option value="">-- рдЪреБрдиреЗрдВ --</option>
          <option>рдореИрдЯреНрд░рд┐рдХ / рдЗрдВрдЯрд░ рдХрд╛ рдПрдбрдорд┐рд╢рди рдлреЙрд░реНрдо</option>
          <option>рднреВрдорд┐ рд╕рдВрдмрдВрдзрд┐рдд рд╕реЗрд╡рд╛рдПрдВ</option>
          <option>рдкреБрд░рд╛рдирд╛ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ / рдЦрддрд┐рдпрд╛рди рдирд┐рдХрд╛рд▓реЗ</option>
          <option>рдкреБрд░рд╛рдирд╛ рдЬрдореАрди рдХрд╛ рд░рд╕реАрдж</option>
          <option>рдЬрдорд╛рдмрдВрджреА рдХрд╛ рд░рдЬрд┐рд╕реНрдЯрд░ 2 рджреЗрдЦреЗрдВ</option>
          <option>рджрд╛рдЦрд┐рд▓ рдЦрд╝рд╛рд░рд┐рдЬ рдСрдирд▓рд╛рдЗрди</option>
          <option>рдЬрдорд╛рдмрдВрджреА рд╕реБрдзрд╛рд░ рд╣реЗрддреБ рдкрд░рд┐рд╢реЛрдзрди рдСрдирд▓рд╛рдЗрди</option>
          <option>рдкреБрд░рд╛рдиреЗ рд╕реЗ рдкреБрд░рд╛рдиреЗ рдЬрдореАрди рд╡рд┐рд╡рд░рдг рджреЗрдЦреЗрдВ</option>
          <option>рдмреИрдВрдХрд┐рдВрдЧ рд╕реЗрд╡рд╛рдПрдВ</option>
          <option>рдордиреА рдЯреНрд░рд╛рдВрд╕рдлрд░</option>
          <option>рдмреИрдВрдХ рдореЗрдВ рдирдпрд╛ рдЦрд╛рддрд╛ рдЦреЛрд▓реЗрдВ</option>
          <option>рдЖрд╡рд╛рд╕реАрдп / рдЬрд╛рддрд┐ / рдЖрдп рдСрдирд▓рд╛рдЗрди / рдиреЙрдирдХреНрд░реАрдореАрд▓реЗрдпрд░ / EWS</option>
          <option>рдкреЗрдВрд╢рди (60 рд╕рд╛рд▓ рдХреЗ рдмрд╛рдж)</option>
          <option>рдкреИрди рдХрд╛рд░реНрдб / рд░рд╛рд╢рди рдХрд╛рд░реНрдб</option>
          <option>рдмрд┐рдЬрд▓реА рднреБрдЧрддрд╛рди</option>
          <option>рдкрд░реАрдХреНрд╖рд╛ рдлреЙрд░реНрдо</option>
          <option>рд╕реНрдХреВрд▓ рдкреНрд░рд╡реЗрд╢</option>
          <option>рдЫрд╛рддреНрд░рд╡реГрддреНрддрд┐</option>
          <option>рд╕рд░рдХрд╛рд░реА рдиреМрдХрд░реА рдЖрд╡реЗрджрди</option>
          <option>рдЕрдиреНрдп</option>
        </select>

        <label>рдЕрдкреЙрдЗрдВрдЯрдореЗрдВрдЯ рддрд╛рд░реАрдЦ (рдпрджрд┐ рдЖрдк рдЪреБрдирдирд╛ рдЪрд╛рд╣реЗрдВ)</label>
        <input id="date" type="date">

        <label>рдЯрд╛рдЗрдо рд╕реНрд▓реЙрдЯ (рдЦрд╛рд▓реА рдЫреЛрдбрд╝реЗрдВ рдпрджрд┐ auto-assign рдЪрд╛рд╣рд┐рдП)</label>
        <div id="slots" class="slot-list"></div>

        <label>рдиреЛрдЯ (рдпрджрд┐ рдХреЛрдИ)</label>
        <textarea id="notes" rows="3"></textarea>

        <div style="display:flex;gap:10px;margin-top:14px">
          <button type="submit">рдмреБрдХ рдХрд░реЗрдВ</button>
          <button type="button" id="resetBtn" style="background:#e6eefc;color:#0b2540">Reset</button>
        </div>
      </form>

      <div id="msg" class="success" style="display:none"></div>
      <p style="color:#475569;font-size:13px;margin-top:10px">рдиреЛрдЯ: рдкреЗрдЬ demo рдореЛрдб рдореЗрдВ localStorage рдЗрд╕реНрддреЗрдорд╛рд▓ рдХрд░реЗрдЧрд╛ рдФрд░ webhook рдкрд░ POST рднреА рдХрд░реЗрдЧрд╛ (рдпрджрд┐ URL рднрд░реЗрдВ)ред</p>
    </section>

    <aside class="card">
      <h3>Admin Controls</h3>
      <p style="color:#475569">Auto-notify: Email + Google Sheet</p>
      <label>Webhook / Google Apps Script URL</label>
      <input id="webhook" placeholder="https://script.google.com/macros/s/XXXX/exec">

      <div style="display:flex;flex-direction:column;gap:10px;margin-top:12px">
        <button id="view" style="background:#4f46e5">рд╕рднреА рдмреБрдХрд┐рдВрдЧ рджреЗрдЦреЗрдВ</button>
        <button id="export" style="background:#6366f1">рдмреБрдХрд┐рдВрдЧ рд╕реВрдЪреА рдХреЙрдкреА рдХрд░реЗрдВ</button>
      </div>

      <hr style="margin:14px 0;border-color:#e6eef6">

      <p style="font-weight:700;margin:0">Contact:</p>
      <p style="margin:4px 0">Digital Hub Cyber Caf├й</p>
      <p style="margin:4px 0">7033066081 | 7250580787</p>
      <p style="margin:4px 0">bhelwa143@gmail.com</p>
    </aside>
  </main>

  <footer>
    <div class="address-box">ЁЯУН Areraj, Girl High School Road, Bihar тАУ 845411</div>
    <div style="margin-top:8px;color:#64748b;font-size:13px">┬й Digital Hub Cyber Caf├й</div>
  </footer>
</div>

<script>
const SLOT_MIN = 30;
const slotsConfig = [{start:'06:00',end:'09:00'},{start:'17:00',end:'22:00'}];
const WHATSAPP_GROUP_LINK = "https://chat.whatsapp.com/KZ4GLW45CgQKX7Lktbe9Oq"; // user provided

function timeToMins(t){const [hh,mm]=t.split(':').map(Number);return hh*60+mm;}
function minsToTime(m){const hh=Math.floor(m/60);const mm=m%60;return String(hh).padStart(2,'0')+':'+String(mm).padStart(2,'0');}
function generateSlots(){const arr=[];slotsConfig.forEach(cfg=>{const s=timeToMins(cfg.start), e=timeToMins(cfg.end);for(let t=s;t<e;t+=SLOT_MIN) arr.push(minsToTime(t));});return arr;}

function getBookings(){try{return JSON.parse(localStorage.getItem('bookings')||'[]')}catch(e){return []}}
function saveBooking(b){const a=getBookings();a.push(b);localStorage.setItem('bookings',JSON.stringify(a));}

const slotsEl = document.getElementById('slots');
const dateEl = document.getElementById('date');
const form = document.getElementById('form');
const msg = document.getElementById('msg');
const webhookEl = document.getElementById('webhook');
let selected = null;

function renderSlotsFor(date){
  slotsEl.innerHTML=''; if(!date) return;
  const all = generateSlots();
  const bookings = getBookings().filter(b=>b.date===date);
  all.forEach(s=>{
    const full = bookings.some(b=>b.slot===s);
    const d = document.createElement('div');
    d.className = 'slot' + (full ? ' full':'');
    d.textContent = s;
    d.addEventListener('click', ()=>{ if(full) return; document.querySelectorAll('.slot').forEach(x=>x.classList.remove('selected')); d.classList.add('selected'); selected = s; });
    slotsEl.appendChild(d);
  });
}

dateEl.addEventListener('change', ()=>{ selected=null; renderSlotsFor(dateEl.value); });
window.addEventListener('load', ()=>{ dateEl.value = new Date().toISOString().slice(0,10); renderSlotsFor(dateEl.value); });

function findFirstAvailable(date){
  const all = generateSlots();
  const bookings = getBookings().filter(b=>b.date===date);
  for(const s of all) if(!bookings.some(b=>b.slot===s)) return s;
  return null;
}

function copyToClipboard(text){
  if(navigator.clipboard && navigator.clipboard.writeText){
    return navigator.clipboard.writeText(text);
  } else {
    const ta = document.createElement('textarea');
    ta.value = text; document.body.appendChild(ta);
    ta.select(); try{ document.execCommand('copy'); }catch(e){}
    document.body.removeChild(ta); return Promise.resolve();
  }
}

form.addEventListener('submit', async(e)=>{
  e.preventDefault();
  const name = document.getElementById('name').value.trim();
  const mobile = document.getElementById('mobile').value.trim();
  const email = document.getElementById('email').value.trim();
  const form_needed = document.getElementById('form_needed').value;
  let date = document.getElementById('date').value;
  let slot = selected;
  if(!name||!mobile||!form_needed){ alert('рдХреГрдкрдпрд╛ рдЬрд░реВрд░реА рдлреАрд▓реНрдб рднрд░реЗрдВ'); return; }
  if(!date){ date = new Date().toISOString().slice(0,10); }
  if(!slot){ slot = findFirstAvailable(date); if(!slot){ alert('рдЪрдпрдирд┐рдд рддрд╛рд░реАрдЦ рдкрд░ рдХреЛрдИ рдЙрдкрд▓рдмреНрдз рд╕реНрд▓реЙрдЯ рдирд╣реАрдВ рд╣реИред рдХреГрдкрдпрд╛ рджреВрд╕рд░реА рддрд╛рд░реАрдЦ рдЪреБрдиреЗрдВред'); return; } }
  const id = 'BKG'+Date.now().toString(36).toUpperCase().slice(-8);
  const booking = {id,name,mobile,email,form_needed,date,slot,notes:document.getElementById('notes').value,created:new Date().toISOString()};
  saveBooking(booking);
  renderSlotsFor(date);
  msg.style.display='block';
  msg.innerHTML = '<strong>рдмреБрдХрд┐рдВрдЧ рд╕рдлрд▓! ID: '+id+'</strong><br>'+name+' тАФ '+date+' '+slot+'<br><br><em>рдХреГрдкрдпрд╛ рджрд┐рдП рдЧрдП рд╕рдордп рдкрд░ рдЕрд╡рд╢реНрдп рдЖрдПрдВред</em><br><strong>рдзрдиреНрдпрд╡рд╛рдж!</strong>';
  const webhook = webhookEl.value.trim();
  if(webhook){
    try{ await fetch(webhook,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(booking)}); }catch(err){console.warn('Webhook failed',err);}
  }

  const groupMsg = 'рдирдпреА рдмреБрдХрд┐рдВрдЧ\nID:'+id+'\nрдирд╛рдо:'+name+'\nрдореЛрдмрд╛рдЗрд▓:'+mobile+'\nрдлрд╝реЙрд░реНрдо:'+form_needed+'\nрддрд┐рдерд┐:'+date+' '+slot;
  const groupBtn = document.createElement('button');
  groupBtn.textContent = 'рдЧреНрд░реБрдк рдореЗрдВ рдиреЛрдЯрд┐рдлрд╛рдИ рдХрд░реЗрдВ (Copy & Open Group)';
  groupBtn.style.marginTop='8px';
  groupBtn.addEventListener('click', ()=>{
    copyToClipboard(groupMsg).then(()=> {
      window.open(WHATSAPP_GROUP_LINK,'_blank');
      alert('рдмреБрдХрд┐рдВрдЧ рд╕рдВрджреЗрд╢ рдХреНрд▓рд┐рдкрдмреЛрд░реНрдб рдореЗрдВ рдХреЙрдкреА рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ тАФ рдЕрдм рдЧреНрд░реБрдк рдореЗрдВ рдЬрд╛рдХрд░ paste рдХрд░рдХреЗ рднреЗрдЬ рджреЗрдВред');
    }).catch(()=> {
      window.open(WHATSAPP_GROUP_LINK,'_blank');
      alert('рдЧреНрд░реБрдк рд▓рд┐рдВрдХ рдЦреБрд▓ рдЧрдпрд╛ тАФ рдХреГрдкрдпрд╛ рдореИрдиреНрдпреБрдЕрд▓реА рд╕рдВрджреЗрд╢ рдХреЙрдкреА рдХрд░рдХреЗ рдкреЗрд╕реНрдЯ рдХрд░реЗрдВред');
    });
  });
  msg.appendChild(groupBtn);

  const personalBtn = document.createElement('button');
  personalBtn.textContent = 'рдПрдбрдорд┐рди рдХреЛ WhatsApp (рд╕рд┐рдзрд╛)';
  personalBtn.style.marginTop='8px'; personalBtn.style.marginLeft='8px';
  personalBtn.addEventListener('click', ()=>{
    const msgText = encodeURIComponent('рдирдпреА рдмреБрдХрд┐рдВрдЧ\nID:'+id+'\nрдирд╛рдо:'+name+'\nрдореЛрдмрд╛рдЗрд▓:'+mobile+'\nрдлрд╝реЙрд░реНрдо:'+form_needed+'\nрддрд┐рдерд┐:'+date+' '+slot);
    window.open('https://wa.me/917033066081?text='+msgText,'_blank');
  });
  msg.appendChild(personalBtn);
});

document.getElementById('resetBtn').addEventListener('click', ()=>{ form.reset(); selected=null; renderSlotsFor(dateEl.value); msg.style.display='none'; });

document.getElementById('view').addEventListener('click', ()=>{ const b=getBookings(); if(b.length===0) return alert('рдХреЛрдИ рдмреБрдХрд┐рдВрдЧ рдирд╣реАрдВ рдорд┐рд▓реА'); const list=b.map(x=>'ID:'+x.id+' | '+x.name+' | '+x.mobile+' | '+x.form_needed+' | '+x.date+' '+x.slot).join('\n'); alert(list); });

document.getElementById('export').addEventListener('click', ()=>{ const b=getBookings(); if(b.length===0) return alert('рдХреЛрдИ рдмреБрдХрд┐рдВрдЧ рдирд╣реАрдВ рдорд┐рд▓реА'); const txt=b.map(x=>'ID:'+x.id+','+x.name+','+x.mobile+','+x.form_needed+','+x.date+','+x.slot).join('\n'); navigator.clipboard.writeText(txt).then(()=>alert('рдмреБрдХрд┐рдВрдЧ рд╕реВрдЪреА рдХреНрд▓рд┐рдкрдмреЛрд░реНрдб рдкрд░ рдХреЙрдкреА рд╣реЛ рдЧрдИред')); });
</script>
</body>
</html>

